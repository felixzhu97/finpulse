# TOGAF Specification

## Core Concepts

TOGAF (The Open Group Architecture Framework) is a standard framework for enterprise architecture development. It includes:

1. **ADM** (Architecture Development Method) – architecture development method
2. **Four architecture domains** – Business, Application, Data, Technology
3. **Architecture Content Framework** – standard structure for architecture deliverables
4. **Architecture Capability Framework** – enterprise architecture governance

## Four Architecture Domains

### Business Architecture

**Definition**: Describes the organization’s business processes, structure, capabilities, and value streams.

**In this project**:

- Portfolio management, market analysis, risk management, transaction management, reporting and compliance
- Business flows: account opening, funding, trading, risk assessment, report generation

**Document location**: `docs/architecture/business-architecture.puml`

### Application Architecture

**Definition**: Describes application system structure, components, interfaces, and interactions.

**In this project**:

- Front-end applications: Web app (`apps/web`), portfolio mobile app (`apps/mobile-portfolio`), other mobile clients (`apps/mobile`)
- UI component libraries: `@fintech/ui`, `@fintech/utils`
- Business components: portfolio overview, market trends, asset allocation, risk analysis, transaction records, etc.
- Application services: portfolio service, market data service, risk analysis service, reporting service
- Back-end services: `services/portfolio-analytics` (FastAPI-based portfolio analytics with DDD layering)
- **Mobile native UI**: `apps/mobile-portfolio` includes a custom native view (**NativeCard**) implemented with React Native’s `RCTViewManager` (iOS) and `SimpleViewManager` (Android), exposed to JS via `requireNativeComponent`. Native code lives in the app: `ios/mobileportfolio/NativeCardViewManager.*`, `android/.../NativeCardView*.kt`, `NativeCardPackage.kt`; JS wrapper in `src/components/NativeCard.tsx`.

**Document location**: `docs/architecture/application-architecture.puml`

**Code locations**:

- `apps/web/` – Financial analytics web console
- `apps/mobile/` – Mobile demo app
- `apps/mobile-portfolio/` – Portfolio mobile app (Expo + RN, with NativeCard native view)
- `packages/ui/` – UI component library
- `packages/utils/` – Utility library
- `services/portfolio-analytics/` – Portfolio analytics and data aggregation service layer

### Data Architecture

**Definition**: Describes data structures, data flows, storage, and management.

**In this project**:

- Data sources: market data, transaction records, account and customer data, risk metrics
- Data ingestion: data from web and mobile apps, batch imports
- Data processing: risk and aggregation logic (local or external services)
- Data storage: relational DB or data warehouse, logs and report storage
- Data presentation: charts, reports, and analysis views in web and mobile

**Document location**: `docs/architecture/data-architecture.puml`

**Code locations**:

- `apps/web/` – Web UI consuming analytics data
- `apps/mobile/`, `apps/mobile-portfolio/` – Mobile clients consuming analytics data
- `services/portfolio-analytics/app` – Domain models, application services, REST API

### Technology Architecture

**Definition**: Describes technology platforms, infrastructure, standards, and deployment.

**In this project**:

- Presentation: browsers, Angular web app, React Native mobile apps (Expo)
- Application: Monorepo, TypeScript, pnpm Workspaces
- Frameworks: Angular, React, Expo, Radix UI, FastAPI
- Visualization: Chart.js, ng2-charts, chartjs-chart-financial (web); react-native-chart-kit, react-native-wagmi-charts (mobile)
- **Native mobile**: iOS (Xcode, CocoaPods, Objective-C/Swift), Android (Gradle, Kotlin); custom native views (e.g. NativeCard) via RCTViewManager / SimpleViewManager
- Build: Angular CLI, TypeScript compiler, ESLint, Python tooling
- Runtime: Node.js, Python
- Deployment: Vercel, Python/FastAPI hosting

**Document location**: `docs/architecture/technology-architecture.puml`

## ADM Core Phases

ADM is TOGAF’s architecture development method (simplified):

### Phase A: Architecture Vision

- Define scope, objectives, stakeholders
- Identify business drivers and requirements

### Phase B: Business Architecture

- Establish business architecture baseline
- Develop target business architecture
- Identify gaps

### Phase C: Information Systems Architecture

- Data architecture (C1): data entities, relationships, flows
- Application architecture (C2): application components, interfaces, interactions

### Phase D: Technology Architecture

- Define technology platform
- Identify standards and guidelines
- Produce technology architecture blueprint

### Phase E: Opportunities and Solutions

- Identify implementation opportunities
- Define roadmap
- Assess risks and dependencies

### Phase F: Migration Planning

- Detailed migration plan
- Transition architectures
- Implementation schedule

### Phase G: Implementation Governance

- Oversee implementation
- Ensure compliance with architecture
- Manage change requests

### Phase H: Architecture Change Management

- Manage architecture changes
- Maintain continuity
- Assess evolution needs

### Requirements Management

- Ongoing across all phases
- Manage and trace architecture requirements

## Architecture Principles

### 1. Business

- **Business first**: Business needs drive architecture decisions
- **Information as asset**: Data is a corporate asset and managed consistently
- **Technology-agnostic**: Business architecture is independent of technology

### 2. Application

- **Component-based**: Applications built from reusable components
- **Standard interfaces**: Components interact via standard interfaces
- **Service-oriented**: Service-oriented design

### 3. Data

- **Data sharing**: Data shared across applications, avoid duplication
- **Data security**: Controlled access and security
- **Data quality**: Accurate, complete, timely data

### 4. Technology

- **Standards**: Use industry standards to reduce technical debt
- **Platform**: Reusable technology platform
- **Scalability**: Architecture supports growth and extension

## Architecture Deliverables

### Baseline Architecture

- Describes current state
- Reference for comparison

### Target Architecture

- Describes desired state
- Meets business and technology objectives

### Gap Analysis

- Identify gaps between baseline and target
- Define solutions to close gaps

### Transition Architecture

- Intermediate states from baseline to target
- Supports phased implementation

## Project Mapping

### Architecture Documents

```text
docs/architecture/
├── business-architecture.puml
├── application-architecture.puml
├── data-architecture.puml
├── technology-architecture.puml
└── domain/
    ├── finance-system.puml
    ├── finance-system-domains.puml
    └── finance-system-flows.puml
```

### Code Structure Mapping

**Business architecture** → Business needs and capabilities (see `docs/domain` for finance system domain diagrams).

**Application architecture** →

- `apps/web/` – Web console
- `apps/mobile/`, `apps/mobile-portfolio/` – Mobile apps (mobile-portfolio includes NativeCard native view)
- `packages/ui/` – UI component layer
- `packages/utils/` – Utility layer
- `services/portfolio-analytics/` – Portfolio analytics service (FastAPI + DDD)

**Data architecture** →

- API clients in web and mobile consuming analytics and reporting data
- Domain models and REST API in `services/portfolio-analytics/app`

**Technology architecture** →

- Root config: `package.json`, `pnpm-workspace.yaml`, `tsconfig.json`, `vercel.json`
- Front-end: `apps/web/`, `apps/mobile/`, `apps/mobile-portfolio/` (native views in iOS/Android)
- Back-end: `services/portfolio-analytics/` (FastAPI)

## Governance Rules

### Architecture Review

- Architecture impact analysis before major features
- Significant changes require architecture review
- Keep architecture documentation in sync with code

### Dependency

```text
Business → Application → Data → Technology
```

- Upper layers depend on lower layers
- Changes in lower layers must consider impact on upper layers
- No reverse dependencies

### Document Maintenance

- Update architecture diagrams when the architecture changes
- Keep documentation aligned with implementation
- Review alignment periodically
- For changes that affect overall or cross-system architecture, update:
  - `docs/architecture/README.md`
  - Relevant PlantUML diagrams
  - Corresponding items in `docs/TODO.md`

## Checklists

### New Feature Development

- [ ] Identify architecture domain(s)
- [ ] Assess impact on existing architecture
- [ ] Ensure compliance with principles
- [ ] Update relevant architecture docs

### Architecture Change

- [ ] Identify affected domains
- [ ] Perform gap analysis
- [ ] Define transition approach
- [ ] Update diagrams and docs
- [ ] Notify stakeholders

### Architecture Alignment

- [ ] Implementation matches architecture
- [ ] Documentation reflects current state
- [ ] Dependency rules followed
- [ ] Principles satisfied

## References

- [TOGAF](https://www.opengroup.org/togaf)
- Project architecture docs: `docs/architecture/README.md`
