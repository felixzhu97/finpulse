@startuml
skinparam linetype ortho

skinparam rectangle {
  BorderColor #333333
}

title Core Finance Flows

partition "Onboarding Flow" {
  start
  :Collect customer data;
  :Run KYC checks;
  :Create customer profile;
  :Open accounts and wallet;
  stop
}

partition "Funding Flow" {
  start
  :Receive funding request;
  :Validate payment method;
  :Send payment to payment network;
  :Credit wallet and accounts;
  stop
}

partition "Trading Flow" {
  start
  :Capture order from channel;
  :Validate limits and risk;
  :Route order to venue;
  :Receive execution report;
  :Update positions and transactions;
  :Trigger post trade checks;
  stop
}

partition "Risk and Reporting Flow" {
  start
  :Ingest market and reference data;
  :Revalue portfolios and positions;
  :Recalculate risk metrics;
  :Store aggregates in warehouse;
  :Publish risk and regulatory reports;
  stop
}

@enduml

